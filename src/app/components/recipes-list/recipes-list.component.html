<form class="searchRecipeForm">
  <mat-form-field class="searchRecipeInput">
    <input matInput type="text" [(ngModel)]="searchText" [ngModelOptions]="{standalone: true}" autocomplete="off"
           placeholder="Search recipe by title or description"/>
  </mat-form-field>
</form>

<div class="filter">
  <h3>Filter</h3>
  <div class="cook-duration">
    <mat-form-field>
      <mat-label>Cook duration</mat-label>
      <mat-select [(ngModel)]="selectedCookDuration" name="cookDuration" class="select-table">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let time of timeCook" [value]="time">{{time}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="cuisine">
      <mat-form-field>
          <mat-label>Cuisine type</mat-label>
          <mat-select [(ngModel)]="selectedCuisineType" name="cuisineType" class="select-table">
            <mat-option selected>None</mat-option>
            <mat-option *ngFor="let cuisineType of cuisineTypes$ | async" [value]="cuisineType">
              {{cuisineType}}
            </mat-option>
          </mat-select>
      </mat-form-field>
  </div>
  <div class="ingredients-count">
    <mat-form-field>
      <mat-label>Number of ingredients</mat-label>
      <mat-select [(ngModel)]="selectedNumberOfIngr" name="numberOfIngr" class="select-table">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let num of numberIngr" [value]="num">{{num}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="rating">
    <mat-form-field>
      <mat-label>Rating</mat-label>
      <mat-select [(ngModel)]="selectedRating" name="rating" class="select-table">
        <mat-option>None</mat-option>
        <mat-option *ngFor="let rate of rating" [value]="rate">{{rate}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <button mat-raised-button (click)='filter()'>Filter</button>
</div>

<button *ngIf="windowScrolled" class="scroll-to-top" (click)="scrollToTop()" mat-button>
  <i class="material-icons">
    arrow_upward
  </i>
</button>

<mat-card class="recipe-component" *ngFor="let recipe of filteredrecipes | filter:searchText"
          (click)="viewDetails(recipe)">
  <div>
    <div class="recipe-component__image-btn-wrapper">
      <img mat-card-image
           src={{recipe.imageSrc}}
           alt={{recipe.title}}>
    </div>

    <div class="recipe-component__info">
      <div class="recipe-component__info_title">
        <mat-card-title><h4>{{recipe.title}}</h4></mat-card-title>
        <h3>Coock duration: {{recipe.cookDuration}} min</h3>
        <mat-card-content class="recipe-component__info_title_recipe-content">
          <p>{{recipe.description}}</p>
          <p>Cuisine: {{recipe.cuisineType}}</p>
        </mat-card-content>
      </div>
    </div>
  </div>

  <div class="recipe-component__buttons">
    <div>
      <p class="recipe-component__rating">Rating: {{recipe.rating | number}}</p>
    </div>
  </div>

</mat-card>

<div *ngIf="(filteredrecipes | filter:searchText)?.length < 1">
  <div *ngIf="recipes?.length > 1; else loading">
    <hr>
    <p class="noRecipesFound">
      No recipes was found â˜¹
    </p>
  </div>
  <ng-template #loading>
    <mat-spinner class="spinner"></mat-spinner>
  </ng-template>
</div>
